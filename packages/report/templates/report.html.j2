<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>투자보고서 — {{ company_name }} ({{ mode }})</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+KR:wght@300;400;500;700&display=swap');

  /* ── PwC Brand Variables ── */
  :root {
    --pwc-black: #2D2D2D;
    --pwc-text: #4A4A4A;
    --pwc-muted: #6E6E6E;
    --pwc-yellow: #FFB600;
    --pwc-tangerine: #EB8C00;
    --pwc-orange: #D04A02;
    --pwc-rose: #DB536A;
    --pwc-red: #E0301E;
    --pwc-bg: #F8F9FA;
    --pwc-white: #FFFFFF;
    --pwc-border: #E5E5E5;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Inter', 'Noto Sans KR', -apple-system, sans-serif;
    color: var(--pwc-black);
    background: var(--pwc-bg);
    line-height: 1.7;
    font-size: 14px;
  }

  /* ── Report Container ── */
  .report-container {
    max-width: 960px;
    margin: 0 auto;
    background: var(--pwc-white);
    border: 1px solid var(--pwc-border);
  }

  /* ── Header ── */
  .report-header {
    background: var(--pwc-black);
    color: var(--pwc-white);
    padding: 36px 48px 28px;
    position: relative;
  }
  .report-header::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #FFB600, #EB8C00, #D04A02, #DB536A, #E0301E);
  }
  .report-header::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #FFB600, #EB8C00, #D04A02, #DB536A, #E0301E);
  }

  .header-top {
    display: flex;
    align-items: center;
    gap: 20px;
    margin-bottom: 20px;
  }
  .header-logo {
    width: 52px;
    height: 52px;
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 2px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 15px;
    font-weight: 700;
    letter-spacing: 1px;
    flex-shrink: 0;
  }

  .report-header h1 {
    font-size: 24px;
    font-weight: 700;
    letter-spacing: -0.5px;
    margin: 0;
  }
  .report-header .subtitle {
    font-size: 13px;
    color: var(--pwc-yellow);
    font-weight: 500;
    margin-top: 4px;
  }

  .meta-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 8px;
    margin-top: 16px;
  }
  .meta-item {
    background: rgba(255,255,255,0.05);
    border-left: 3px solid var(--pwc-orange);
    padding: 8px 12px;
  }
  .meta-item .label {
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 1.2px;
    color: var(--pwc-tangerine);
    font-weight: 600;
    margin-bottom: 1px;
  }
  .meta-item .value {
    font-size: 13px;
    font-weight: 500;
    color: var(--pwc-white);
  }

  /* ── Body ── */
  .report-body {
    padding: 36px 48px;
  }

  /* ── Section ── */
  .section {
    margin-bottom: 28px;
    page-break-inside: avoid;
  }
  .section-title {
    font-size: 16px;
    font-weight: 700;
    color: var(--pwc-black);
    border-bottom: 2px solid var(--pwc-orange);
    padding-bottom: 6px;
    margin-bottom: 14px;
    letter-spacing: -0.2px;
  }
  .section-content {
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: 1.8;
    color: var(--pwc-text);
  }

  /* ── IC Summary Box ── */
  .ic-box {
    background: var(--pwc-white);
    border: 1px solid var(--pwc-border);
    border-left: 4px solid var(--pwc-orange);
    padding: 24px;
    margin-bottom: 28px;
  }
  .ic-box h2 {
    font-size: 15px;
    color: var(--pwc-orange);
    font-weight: 700;
    margin-bottom: 12px;
  }

  /* ── Tables ── */
  table {
    width: 100%;
    border-collapse: collapse;
    margin: 12px 0;
    font-size: 13px;
  }
  th {
    background: var(--pwc-black);
    color: var(--pwc-white);
    padding: 10px 12px;
    text-align: left;
    font-weight: 600;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  td {
    padding: 10px 12px;
    border-bottom: 1px solid var(--pwc-border);
    color: var(--pwc-text);
  }
  tr:nth-child(even) {
    background: var(--pwc-bg);
  }

  /* ── Rating Badges ── */
  .badge-green {
    background: #28a745;
    color: #fff;
    padding: 2px 10px;
    border-radius: 2px;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  .badge-yellow {
    background: var(--pwc-yellow);
    color: var(--pwc-black);
    padding: 2px 10px;
    border-radius: 2px;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  .badge-red {
    background: var(--pwc-red);
    color: #fff;
    padding: 2px 10px;
    border-radius: 2px;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  /* ── Blockquote (Evidence) ── */
  blockquote {
    border-left: 3px solid var(--pwc-tangerine);
    padding: 10px 16px;
    margin: 10px 0;
    background: #FFFBF5;
    color: var(--pwc-text);
    font-style: italic;
  }

  /* ── Lists ── */
  ul, ol {
    padding-left: 24px;
    margin: 8px 0;
  }
  li {
    margin-bottom: 4px;
    color: var(--pwc-text);
  }

  /* ── Checklist ── */
  .checklist li {
    list-style: none;
    padding-left: 4px;
  }
  .checklist li::before {
    content: "☐ ";
    font-size: 14px;
    color: var(--pwc-orange);
  }

  /* ── Markdown headers inside content ── */
  .section-content h2 {
    font-size: 15px;
    color: var(--pwc-black);
    margin: 20px 0 8px;
    border-bottom: 1px solid var(--pwc-border);
    padding-bottom: 4px;
    font-weight: 700;
  }
  .section-content h3 {
    font-size: 14px;
    color: var(--pwc-black);
    font-weight: 600;
    margin: 16px 0 6px;
  }
  .section-content h4 {
    font-size: 13px;
    color: var(--pwc-muted);
    font-weight: 600;
    margin: 12px 0 4px;
  }

  /* ── Footer ── */
  .report-footer {
    background: var(--pwc-black);
    padding: 18px 48px;
    font-size: 11px;
    color: #888;
    text-align: center;
    position: relative;
  }
  .report-footer::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #FFB600, #EB8C00, #D04A02, #DB536A, #E0301E);
  }
  .report-footer strong {
    color: var(--pwc-yellow);
  }

  /* ── Print ── */
  @media print {
    body { background: #fff; }
    .report-container { border: none; }
    .section { page-break-inside: avoid; }
  }

  /* ── Responsive ── */
  @media (max-width: 768px) {
    .report-header, .report-body, .report-footer { padding-left: 20px; padding-right: 20px; }
    .meta-grid { grid-template-columns: 1fr 1fr; }
    .report-header h1 { font-size: 20px; }
  }
</style>
</head>
<body>
<div class="report-container">

  <!-- Header -->
  <div class="report-header">
    <div class="header-top">
      <div class="header-logo">PwC</div>
      <div>
        <h1>{{ company_name }} — 투자보고서</h1>
        <div class="subtitle">{{ mode }} | {{ generated_at }}</div>
      </div>
    </div>
    <div class="meta-grid">
      <div class="meta-item">
        <div class="label">업종</div>
        <div class="value">{{ industry }}</div>
      </div>
      <div class="meta-item">
        <div class="label">투자 목적</div>
        <div class="value">{{ investment_purpose }}</div>
      </div>
      <div class="meta-item">
        <div class="label">투자 기간</div>
        <div class="value">{{ investment_period }}</div>
      </div>
      <div class="meta-item">
        <div class="label">엑싯 선호</div>
        <div class="value">{{ exit_preference }}</div>
      </div>
      <div class="meta-item">
        <div class="label">리스크 선호</div>
        <div class="value">{{ risk_preference }}</div>
      </div>
      <div class="meta-item">
        <div class="label">보고서 톤</div>
        <div class="value">{{ report_tone }}</div>
      </div>
      <div class="meta-item">
        <div class="label">체크리스트 깊이</div>
        <div class="value">{{ checklist_depth }}</div>
      </div>
    </div>
  </div>

  <!-- Body -->
  <div class="report-body">

    {% if memo %}
    <div class="section">
      <div class="section-title">입력 메모</div>
      <div class="section-content">{{ memo }}</div>
    </div>
    {% endif %}

    <!-- Summary (IC Box) -->
    <div class="ic-box">
      <h2>종합 요약 (Executive Summary & IC-ready Summary)</h2>
      <div class="section-content">{{ summary }}</div>
    </div>

    <!-- Agent Results -->
    {% for key, content in agent_results.items() %}
    <div class="section">
      <div class="section-title">
        {% if key == "consulting" %}전략 분석 (Consulting)
        {% elif key == "dd" %}실사 팩 (DD Pack)
        {% elif key == "legal" %}법률 리스크 (Legal)
        {% elif key == "finance_cost" %}재무/비용 분석 (Finance & Cost)
        {% elif key == "exit_strategy" %}엑싯 전략 (Exit Strategy)
        {% else %}{{ key }}
        {% endif %}
      </div>
      <div class="section-content">{{ content }}</div>
    </div>
    {% endfor %}

  </div>

  <!-- Footer -->
  <div class="report-footer">
    본 보고서는 LLM 기반 자동 생성 문서입니다. 투자 의사결정 전 반드시 전문가 검토가 필요합니다.<br>
    <strong>생성 시각:</strong> {{ generated_at }} | <strong>모드:</strong> {{ mode }}
  </div>

</div>
</body>
</html>
